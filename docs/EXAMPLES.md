# 使用示例

本文档提供 Flowchart Generator Skill 的详细使用示例。

---

## 示例 1：用户认证

### 需求描述

```
创建一个用户认证流程图，包括以下步骤：
1. 用户打开登录页面
2. 输入用户名和密码
3. 点击登录按钮
4. 系统验证凭证
   - 如果凭证无效：显示错误信息，返回步骤 2
   - 如果凭证有效：
     5. 创建用户会话
     6. 生成 JWT 令牌
     7. 保存令牌到 localStorage
     8. 重定向到用户仪表板
     9. 流程结束
```

### 生成的文本流程图

```
     开始
       ↓
  [打开登录页面]
       ↓
  [输入用户名和密码]
       ↓
     {验证凭证}
  ├─ 无效 → [显示错误信息] → 返回输入
  └─ 有效 → [创建用户会话]
                 ↓
           [生成 JWT 令牌]
                 ↓
           [保存到 localStorage]
                 ↓
           [重定向到仪表板]
                 ↓
              结束
```

---

## 示例 2：电商订单处理

### 需求描述

```
设计一个电商订单处理流程：
1. 用户提交订单
2. 验证库存
3. 如果库存不足：通知用户、返回购物车
4. 如果库存充足：
   5. 扣减库存
   6. 创建订单记录
   7. 发送支付请求到支付网关
   8. 等待支付结果
   9. 支付成功：发送确认邮件、生成发货请求
   10. 支付失败：恢复库存、通知用户
```

### 生成的文本流程图

```
      开始
        ↓
   [提交订单]
        ↓
    {验证库存}
  ├─ 不足 → [通知用户] → 返回购物车
  └─ 充足 → [扣减库存]
                 ↓
           [创建订单记录]
                 ↓
         [发送支付请求]
                 ↓
         {等待支付结果}
  ├─ 失败 → [恢复库存] → [通知用户] → 结束
  └─ 成功 → [发送确认邮件]
                     ↓
              [生成发货请求]
                     ↓
                   结束
```

---

## 示例 3：CI/CD 部署流程

### 需求描述

```
创建一个 CI/CD 部署流程图：
1. 开发者提交代码
2. 触发 CI 流水线
3. 运行单元测试
4. 测试失败：通知开发者、停止部署
5. 测试通过：构建 Docker 镜像
6. 运行安全扫描
7. 扫描发现问题：阻止部署、创建安全工单
8. 扫描通过：推送到镜像仓库
9. 部署到预发布环境
10. 运行集成测试
11. 集成测试失败：回滚、通知团队
12. 集成测试通过：部署到生产环境
13. 发送部署成功通知
```

### 生成的文本流程图

```
      开始
        ↓
   [提交代码]
        ↓
  [触发 CI 流水线]
        ↓
   [运行单元测试]
        ↓
    {测试结果}
  ├─ 失败 → [通知开发者] → 结束
  └─ 通过 → [构建 Docker 镜像]
                  ↓
           [运行安全扫描]
                  ↓
          {扫描结果}
  ├─ 发现问题 → [创建工单] → 结束
  └─ 通过 → [推送镜像仓库]
                ↓
       [部署到预发布环境]
                ↓
       [运行集成测试]
                ↓
       {集成测试结果}
  ├─ 失败 → [回滚] → [通知团队] → 结束
  └─ 通过 → [部署到生产环境]
                  ↓
           [发送成功通知]
                  ↓
                 结束
```

---

## 示例 4：微服务架构图

### 需求描述

```
绘制一个电商系统的微服务架构图，包含以下组件：
- API Gateway（入口）
- User Service（用户服务）
- Product Service（产品服务）
- Order Service（订单服务）
- Payment Service（支付服务）
- Notification Service（通知服务）
- PostgreSQL（数据库，每个服务一个）
- Redis（缓存层）
- RabbitMQ（消息队列）
```

### 服务间连接关系

```
                          [API Gateway]
                                │
          ┌─────────────────────┼─────────────────────┐
          ↓                     ↓                     ↓
  [User Service]      [Product Service]      [Order Service]
          │                     │                     │
          ↓                     ↓                     ↓
    (PostgreSQL)          (PostgreSQL)      [Payment Service]
          │                     │                     │
          └─────────────┬───────┴─────────────┬────────
                        ↓                     ↓
                     (Redis)           [RabbitMQ]
                                             ↓
                                    [Notification Service]
                                             ↓
                                    (PostgreSQL)
```

---

## 示例 5：故障处理决策流程

### 需求描述

```
创建一个系统故障处理决策流程：
1. 监控系统检测到异常
2. 判断异常类型
   - 如果是网络超时：重试 3 次，仍然失败则告警
   - 如果是数据库错误：检查连接池，如果是连接问题则重连
   - 如果是业务逻辑错误：记录日志、发送告警
   - 如果是未知错误：降级处理、通知运维
```

### 生成的文本流程图

```
      开始
        ↓
  [检测到异常]
        ↓
  {判断异常类型}
    │
    ├─ 网络超时 → [重试请求] → {重试次数}
    │                          ├─ < 3 → 继续
    │                          └─ ≥ 3 → [发送告警] → 结束
    │
    ├─ 数据库错误 → [检查连接池] → {连接状态}
    │                            ├─ 可用 → [重试查询]
    │                            └─ 不可用 → [重新连接]
    │
    ├─ 业务逻辑错误 → [记录错误日志] → [发送告警] → 结束
    │
    └─ 未知错误 → [启用降级模式] → [通知运维] → 结束
```

---

## 提示词模板

### 模板 1：简单流程

```
创建一个 [主题] 流程图，包括以下步骤：
1. [步骤 1]
2. [步骤 2]
3. [步骤 3]
...
```

### 模板 2：带分支的流程

```
设计一个 [主题] 流程：
1. [步骤 1]
2. [决策点]
   - 条件 A：[操作 A]
   - 条件 B：[操作 B]
```

### 模板 3：系统架构

```
绘制一个 [系统名称] 的架构图，包含以下组件：
- [组件 1]：[功能描述]
- [组件 2]：[功能描述]
- [组件 3]：[功能描述]

它们之间的连接关系是：
[描述连接关系]
```

---

## 常见使用场景

| 场景 | 示例提示词 |
|------|-----------|
| 需求分析 | `帮我分析这个用户故事的流程` |
| 代码审查 | `绘制这个函数的执行流程图` |
| 系统设计 | `设计一个微服务架构的订单系统` |
| 故障排查 | `展示系统故障处理流程` |
| 文档编写 | `为 README 创建一个安装流程图` |
| 演示准备 | `为会议准备一个产品功能演示流程` |

---

## 高级技巧

### 1. 逐步细化

从简单的流程开始，然后逐步添加细节：

```
第一轮：创建用户注册流程
第二轮：添加邮箱验证步骤
第三轮：添加重复检查逻辑
```

### 2. 多层次流程

将复杂流程分解为多个子流程：

```
主流程 → [调用子流程 A] → [调用子流程 B] → [调用子流程 C]
```

### 3. 颜色编码

请求时指定颜色含义：

```
用绿色表示成功路径，红色表示错误处理，黄色表示决策点
```

### 4. 添加注释

```
在流程图中添加注释，说明每个步骤的目的和注意事项
```

---

**需要更多示例或有特定需求？欢迎提交 Issue！** 💡
